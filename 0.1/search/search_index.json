{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"FastCLAM","text":"<p>FastAPI for CLAMS</p>"},{"location":"#install","title":"install","text":"<p>Clone the repository</p> <pre><code>git clone https://github.com/WGBH-MLA/FastCLAM\ncd FastCLAM/\n</code></pre>"},{"location":"#poetry-recommended","title":"Poetry (Recommended)","text":"<p>Install with poetry</p> <pre><code>poetry install\n</code></pre>"},{"location":"#pip","title":"Pip","text":"<pre><code>pip3 install .\n</code></pre>"},{"location":"reference/","title":"Reference","text":""},{"location":"reference/#fastclam--fastclam","title":"FastCLAM","text":"<p>FastAPI for CLAMS</p> Example <p>Run the server:     <code>$ uvicorn fastclam.app</code></p> <p>Use the API docs to make requests:     localhost:8000/docs</p>"},{"location":"reference/app/","title":"App","text":""},{"location":"reference/app/#fastclam.app--fastclamapp","title":"FastCLAM.app","text":"Example <p><code>$ uvicorn fastclam.app</code></p> Todo <p>Stuff</p>"},{"location":"reference/app/#fastclam.app.generate_source","title":"<code>generate_source(files)</code>","text":"<p>Generate a new source MMIF from multiple input files</p> Source code in <code>fastclam/app.py</code> <pre><code>@app.post('/source')\ndef generate_source(files: Inputs) -&gt; dict:\n\"\"\"Generate a new source MMIF from multiple input files\"\"\"\n    log.info(f'sourcing media {files.files}')\n    mmif = generate_source_mmif(files.files)\n    json_value = loads(str(mmif))\n    log.debug(f'sourced: {json_value}')\n    return json_value\n</code></pre>"},{"location":"reference/app/#fastclam.app.home","title":"<code>home()</code>","text":"<p>Return version info</p> Source code in <code>fastclam/app.py</code> <pre><code>@app.get('/')\ndef home() -&gt; dict:\n\"\"\"Return version info\"\"\"\n    return {'FastCLAM': __VERSION__}\n</code></pre>"},{"location":"reference/app/#fastclam.app.run_pipeline","title":"<code>run_pipeline(pipeline, all=False)</code>","text":"<p>Run a list of media through a list of apps</p> Source code in <code>fastclam/app.py</code> <pre><code>@app.post('/pipeline')\ndef run_pipeline(pipeline: Pipeline, all: bool = False) -&gt; list:\n\"\"\"Run a list of media through a list of apps\"\"\"\n    results = []\n    log.info(f'Starting pipeline {pipeline}')\n    for media in pipeline.files:\n        mmif = generate_source(Inputs(files=[media]))\n\n        for app in pipeline.apps:\n            log.debug(f'Running {media} through {app}')\n            response = requests.post(app, json=mmif)\n            assert response.status_code == 200, f'Error with {pipeline}: {response}'\n            try:\n                mmif = response.json()\n            except Exception as e:\n                log.warn(f'Error parsing json {e}')\n                log.debug('Trying to parse as xml')\n                mmif = ElementTree.fromstring(response.content)\n            results.append(mmif)\n\n    log.info(f'Ran {len(pipeline.files)} files through {len(pipeline.apps)} apps')\n    return results\n</code></pre>"},{"location":"reference/models/","title":"Models","text":"<p>Models</p> <p>Pipeline validation models</p>"},{"location":"reference/models/#fastclam.models.Inputs","title":"<code>Inputs</code>","text":"<p>         Bases: <code>BaseModel</code></p> <p>Inputs</p> <p>Accepts list of files as input</p> <p>Attributes:</p> Name Type Description <code>files</code> <code>List[str]</code> <p>A List of file paths as strings</p> Source code in <code>fastclam/models.py</code> <pre><code>class Inputs(BaseModel):\n\"\"\"Inputs\n\n    Accepts list of files as input\n\n    Attributes:\n        files: A List of file paths as strings\n    \"\"\"\n\n    files: List[str]\n</code></pre>"},{"location":"reference/models/#fastclam.models.Pipeline","title":"<code>Pipeline</code>","text":"<p>         Bases: <code>Inputs</code></p> <p>Pipeline</p> <p>A simple pieline validator</p> <p>Attributes:</p> Name Type Description <code>apps</code> <code>List[str]</code> <p>A List of apps to run, where each</p> Source code in <code>fastclam/models.py</code> <pre><code>class Pipeline(Inputs):\n\"\"\"Pipeline\n\n    A simple pieline validator\n\n    Attributes:\n        apps: A List of apps to run, where each\n    \"\"\"\n\n    apps: List[str]\n</code></pre>"}]}