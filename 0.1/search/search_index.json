{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"FastCLAM","text":"<p>FastAPI for CLAMS</p>"},{"location":"#install","title":"install","text":"<p>Clone the repository</p> <pre><code>git clone https://github.com/WGBH-MLA/FastCLAM\ncd FastCLAM/\n</code></pre>"},{"location":"#poetry-recommended","title":"Poetry (Recommended)","text":"<p>Install with poetry</p> <pre><code>poetry install\n</code></pre>"},{"location":"#pip","title":"Pip","text":"<pre><code>pip3 install .\n</code></pre>"},{"location":"reference/","title":"Reference","text":""},{"location":"reference/#fastclam.app.generate_source","title":"<code>generate_source(files)</code>","text":"<p>Generate a new source MMIF from multiple input files</p> Source code in <code>fastclam/app.py</code> <pre><code>@app.post('/source')\ndef generate_source(files: Inputs) -&gt; dict:\n\"\"\"Generate a new source MMIF from multiple input files\"\"\"\n    log.info(f'sourcing media {files.files}')\n    mmif = generate_source_mmif(files.files)\n    json_value = loads(str(mmif))\n    log.debug(f'sourced: {json_value}')\n    return json_value\n</code></pre>"},{"location":"reference/#fastclam.app.home","title":"<code>home()</code>","text":"<p>version info</p> Source code in <code>fastclam/app.py</code> <pre><code>@app.get('/')\ndef home() -&gt; dict:\n\"\"\"version info\"\"\"\n    return {'FastCLAM': __VERSION__}\n</code></pre>"},{"location":"reference/#fastclam.app.run_pipeline","title":"<code>run_pipeline(pipeline, all=False)</code>","text":"<p>Run a list of media through a list of apps</p> Source code in <code>fastclam/app.py</code> <pre><code>@app.post('/pipeline')\ndef run_pipeline(pipeline: Pipeline, all: bool = False) -&gt; list:\n\"\"\"Run a list of media through a list of apps\"\"\"\n    results = []\n    log.info(f'Starting pipeline {pipeline}')\n    for media in pipeline.files:\n        mmif = generate_source(Inputs(files=[media]))\n\n        for app in pipeline.apps:\n            log.debug(f'Running {media} through {app}')\n            response = requests.post(app, json=mmif)\n            assert response.status_code == 200, f'Error with {pipeline}: {response}'\n            try:\n                mmif = response.json()\n            except Exception as e:\n                log.warn(f'Error parsing json {e}')\n                log.debug('Trying to parse as xml')\n                mmif = ElementTree.fromstring(response.content)\n            results.append(mmif)\n\n    log.info(f'Ran {len(pipeline.files)} files through {len(pipeline.apps)} apps')\n    return results\n</code></pre>"}]}